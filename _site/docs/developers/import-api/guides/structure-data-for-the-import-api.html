<!DOCTYPE html>
<head>
    <!-- Google Tag Manager  -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PXBN5GK');</script>
<!-- End Google Tag Manager -->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta class="swiftype" name="description" data-type="string" content="Best practices and tips for structuring data in Import API requests.">
<meta class="swiftype" name="keywords" data-type="string" content=",  ">
<title>Structuring Data for the Stitch Import API | Stitch Documentation</title>

<meta property="og:title" content="Structuring Data for the Stitch Import API | Stitch Documentation" />
<meta property="og:description" content="Best practices and tips for structuring data in Import API requests." />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs" />
<meta property="og:image" content="https://www.stitchdata.com/images/og-site-icon-talend.png" />
<meta property="og:site_name" content="Stitch Docs" />

<meta name="twitter:creator" content="@stitch_data">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@stitch_data" />
<meta name="twitter:image" content="https://www.stitchdata.com/images/og-site-icon-talend.png" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- STYLESHEETS -->
<link rel="stylesheet" type="text/css" href="/docs/css/bootstrap.min.css">
<link rel="stylesheet" href="/docs/css/modern-business.css">
<link rel="stylesheet" href="/docs/css/lavish-bootstrap.css">
<link rel="stylesheet" href="/docs/css/customstyles.css">
<link rel="stylesheet" href="/docs/css/theme-stitch.css">
<link rel="stylesheet" href="/docs/css/docsearch.min.css" />
<link rel="stylesheet" href="/docs/stylesheets/screen.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- FONT AWESOME -->
<script src="https://kit.fontawesome.com/e0e120b2f0.js"></script>

<!-- JQUERY -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/docs/js/jquery.navgoco.min.js"></script>

<!-- FAVICONS  -->
<link rel="/docs/images/apple-touch-icon" sizes="57x57" href="/docs/images/apple-icon-57x57.png">
<link rel="/docs/images/apple-touch-icon" sizes="60x60" href="/docs/images/apple-icon-60x60.png">
<link rel="/docs/images/apple-touch-icon" sizes="72x72" href="/docs/images/apple-icon-72x72.png">
<link rel="/docs/images/apple-touch-icon" sizes="76x76" href="/docs/images/apple-icon-76x76.png">
<link rel="/docs/images/apple-touch-icon" sizes="114x114" href="/docs/images/apple-icon-114x114.png">
<link rel="/docs/images/apple-touch-icon" sizes="120x120" href="/docs/images/apple-icon-120x120.png">
<link rel="/docs/images/apple-touch-icon" sizes="144x144" href="/docs/images/apple-icon-144x144.png">
<link rel="/docs/images/apple-touch-icon" sizes="152x152" href="/docs/images/apple-icon-152x152.png">
<link rel="/docs/images/apple-touch-icon" sizes="180x180" href="/docs/images/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/docs/images/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/docs/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/docs/images/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/docs/images/favicon-16x16.png">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="/docs/css/syntax.css">

<!-- FONTS -->
<link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700&display=swap" rel="stylesheet">

<style type="text/css">
	.js .fouc {display: none !important;}
</style>

<script type="text/javascript">
	document.documentElement.className = 'js';
</script>

<!-- Begin Inspectlet Embed Code -->
<script type="text/javascript" id="inspectletjs">
window.__insp = window.__insp || [];
__insp.push(['wid', 479657659]);
(function() {
function ldinsp(){if(typeof window.__inspld != "undefined") return; window.__inspld = 1; var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); };
setTimeout(ldinsp, 500); document.readyState != "complete" ? (window.attachEvent ? window.attachEvent('onload', ldinsp) : window.addEventListener('load', ldinsp, false)) : ldinsp();
})();
</script>
<!-- End Inspectlet Embed Code -->


  <!-- Initializes tooltips -->
    <script>
      $(function () {
            $('[data-toggle="tooltip"]').tooltip({
              delay: {show: 0, hide: 2000}
            });
        })
    </script>

</head>



<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PXBN5GK"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<!-- Navigation -->

<nav class="stitch-docs-navbar" data-swiftype-index='false'>
    <div class="nav-left">
        <?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 23.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="logomark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
             viewBox="0 0 380 380" enable-background="new 0 0 380 380" xml:space="preserve">
        <path id="logomark_2_" fill="#FFFFFF" d="M120,177.1v-26.7h260V0H0v203.8h270.5v26.7H0V380h380V175.2H120V177.1z M193.3,39
            c10.5,0,19,8.6,19,19s-8.6,19-19,19s-19-8.6-19-19C174.3,46.7,183.8,39,193.3,39z M112.4,96.2H281l-7.6,26.7H119L112.4,96.2z
             M193.3,340c-10.5,0-19-8.6-19-19c0-10.5,8.6-19,19-19s19,8.6,19,19C212.4,331.4,202.9,340,193.3,340z M112.4,281.9l6.7-26.7h154.3
            l7.6,26.7H112.4z"/>
        </svg>
        <a class="navbar-brand" href="/docs/">
            <span class="projectTitle"> Stitch Docs</span>
        </a>
    </div>
    <div class="mobile-nav-icon"></div>
    <div id="close" class="mobile-close-out hide"></div>
    <div class="nav-right">
        <ul class="stitch-nav">
            <!-- entries without drop-downs appear here -->
            
                
                    
                        <li>
                            <a href="https://www.stitchdata.com" target="_blank">stitchdata.com</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="https://github.com/stitchdata/docs#stitch-documentation" target="_blank"><i class="fab fa-github" aria-hidden="true"></i> Contribute
</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="https://www.stitchdata.com/changelog" target="_blank">Changelog</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="/docs/announcements">Announcements</a>
                        </li>
                    
                
            
            <li class="sign-up"><a href="https://stitchdata.com/signup">Sign up</a></li>
            <li>
                <!--start search-->
                <div id="search-demo-container">
                    <input type="text" id="search-input" placeholder="What can we help you find?">
                    <div class="img"><i class="fa fa-search"></i></div>
                </div>
            </li>
        </ul>
    </div>


</nav>


<!-- Page Content -->
<div id="main">
    <div class="sidebar-column">
      <div class="sidebar-button"></div>
        
<!-- UI: page/button/section names, menu paths, etc -->


<!-- Simplifies internal links -->


<!-- Stitch -->


<!-- UI Icons -->



<!-- Tooltips and terms -->



<!-- Mapping of Stitch replication/system columns -->



<!-- Rejected Record table details & schema -->



<!-- Stitch IP addresses  -->



    	
    		
<!-- UI: page/button/section names, menu paths, etc -->


<!-- Simplifies internal links -->


<!-- Stitch -->


<!-- UI Icons -->



<!-- Tooltips and terms -->



<!-- Mapping of Stitch replication/system columns -->



<!-- Rejected Record table details & schema -->



<!-- Stitch IP addresses  -->


<div class="menu-list" data-swiftype-index='false'>

<ul id="mysidebar" class="nav">
    <!-- Stitch status widget -->
    <a class="status-page" href="http://status.stitchdata.com" target="_blank">
        <span class="color-dot"></span>
        <span class="color-description"></span>
    </a>

    <li>
    	<strong>In this guide:</strong>
    </li>

    
	    <li>
			<a href="#">
		    	Introduction
		    </a>
		</li>
	

    

    
		
            	<li>
            		<a href="#endpoints">
		            	Endpoints in this guide
		            </a>
		        </li>
    		
    	</li>
    
		
            <li class="subfolders">
                <a data-toggle="collapse" href="#structuring-guidelines--menu" aria-expanded="false" aria-controls="structuring-guidelines--menu">
                    Structuring guidelines
                    <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                </a>

                <ul class="collapse" id="structuring-guidelines--menu">

                    <!-- This is a menu item that actually links to the section. It's
                        in here because the menu doesn't link to the section, the anchor just opens the menu. -->
            		<li>
                        <a href="#structuring-guidelines">Structuring guidelines</a>
                    </li>

               		
                        
                    		<li>
                                <a href="#general-guidelines">General guidelines</a>
                            </li>
                        
                	
                        
                    		<li>
                                <a href="#request-body-requirements">Guidelines for request bodies</a>
                            </li>
                        
                	
                </ul>

            
    	</li>
    
		
            <li class="subfolders">
                <a data-toggle="collapse" href="#tables-and-primary-keys--menu" aria-expanded="false" aria-controls="tables-and-primary-keys--menu">
                    Defining tables and Primary Keys
                    <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                </a>

                <ul class="collapse" id="tables-and-primary-keys--menu">

                    <!-- This is a menu item that actually links to the section. It's
                        in here because the menu doesn't link to the section, the anchor just opens the menu. -->
            		<li>
                        <a href="#tables-and-primary-keys">Defining tables and Primary Keys</a>
                    </li>

               		
                        
                    		<li>
                                <a href="#tables">Tables</a>
                            </li>
                        
                	
                        
                    		<li>
                                <a href="#primary-keys">Primary Keys</a>
                            </li>
                        
                	
                </ul>

            
    	</li>
    
		
            <li class="subfolders">
                <a data-toggle="collapse" href="#data-typing--menu" aria-expanded="false" aria-controls="data-typing--menu">
                    Data typing
                    <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                </a>

                <ul class="collapse" id="data-typing--menu">

                    <!-- This is a menu item that actually links to the section. It's
                        in here because the menu doesn't link to the section, the anchor just opens the menu. -->
            		<li>
                        <a href="#data-typing">Data typing</a>
                    </li>

               		
                        
                            <li class="subfolders">
                                <a data-toggle="collapse" href="#create-a-batch-endpoint-data-typing--menu" aria-expanded="false" aria-controls="create-a-batch-endpoint-data-typing--menu">
                                    Batch (/v2/import/batch) endpoint data typing 
                                    <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                </a>

                                <ul class="collapse" id="create-a-batch-endpoint-data-typing--menu">
                                <!-- Same as above - this is the item that actually links
                                    to the section. -->
                                    <li>
                                        <a href="#create-a-batch-endpoint-data-typing">Batch (/v2/import/batch) endpoint data typing</a>
                                    </li>

                                    
                                        <li>
                                            <a href="#json-schemas-batch-endpoint">JSON schemas in the Batch endpoint</a>
                                        </li>
                                    
                                </ul>
                        
                	
                        
                            <li class="subfolders">
                                <a data-toggle="collapse" href="#push-data-endpoint-data-typing--menu" aria-expanded="false" aria-controls="push-data-endpoint-data-typing--menu">
                                    Push (/v2/import/push) endpoint data typing 
                                    <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                </a>

                                <ul class="collapse" id="push-data-endpoint-data-typing--menu">
                                <!-- Same as above - this is the item that actually links
                                    to the section. -->
                                    <li>
                                        <a href="#push-data-endpoint-data-typing">Push (/v2/import/push) endpoint data typing</a>
                                    </li>

                                    
                                        <li>
                                            <a href="#changed-data-type-handling-push-endpoint">Changed data type handling in the Push endpoint</a>
                                        </li>
                                    
                                        <li>
                                            <a href="#enforcing-data-types-in-push-endpoint">Enforcing data types in the Push endpoint</a>
                                        </li>
                                    
                                </ul>
                        
                	
                </ul>

            
    	</li>
    

    
	    <hr>

	    <li>
	    	<strong>Related:</strong>
	    </li>

	    	
	    		<li>
            		<a href="/docs/developers/import-api/api">
		            	Import API reference
		            </a>
		        </li>
	    	
	    		<li>
            		<a href="/docs/developers/import-api/guides/sequencing-data-for-the-import-api">
		            	Sequencing data for the Import API
		            </a>
		        </li>
	    	
	    		<li>
            		<a href="/docs/replication/loading/understanding-loading-behavior">
		            	Understanding loading behavior
		            </a>
		        </li>
	    	
	
</ul>

</div>
    	

    </div>
    <div class="content-column">

        <div class="article">
          
            <div class="breadbox">
                <div class="breadcrumb-container" data-swiftype-index='false'>
                    <div id="breadcrumb-menu" class="menu-left">
                        <!-- Credit to JoostS for this code: https://stackoverflow.com/questions/9612235/what-are-some-good-ways-to-implement-breadcrumbs-on-a-jekyll-site -->




<a href="/docs">DOCS</a>

  
    > <a href="/docs/developers/">DEVELOPERS</a>
  

  
    > <a href="/docs/developers/import-api/">IMPORT API</a>
  

  
    > <a href="/docs/developers/import-api/guides/">GUIDES</a>
  

  
    > <strong>STRUCTURING DATA FOR THE STITCH IMPORT API</strong>
  


                    </div>

                    
                </div>
            </div>
          

          <div class="post-header">
    <h1 class="post-title-main">Structuring Data for the Stitch Import API</h1>
</div>

<div class="post-content">
<!-- Controls display of page summary -->
   

<!-- Table of Contents -->
    

    

      
<!-- UI: page/button/section names, menu paths, etc -->


<!-- Simplifies internal links -->


<!-- Stitch -->


<!-- UI Icons -->



<!-- Tooltips and terms -->



<!-- Mapping of Stitch replication/system columns -->



<!-- Rejected Record table details & schema -->



<!-- Stitch IP addresses  -->



<!-- This only runs for destination and integration pgaes.
    The include assigns a different page variable, and displays the correc
    beta notice when applicable. -->
    
        <!-- This file is used to assign the correct
	page variable for destination and integration content.

	It'll also display the appropriate beta notice for
	destinations/integrations that require it. -->

    
    


    
<!-- UI: page/button/section names, menu paths, etc -->

<!-- Simplifies internal links -->

<!-- Stitch -->

<!-- UI Icons -->

<!-- Tooltips and terms -->

<!-- Mapping of Stitch replication/system columns -->

<!-- Rejected Record table details & schema -->

<!-- Stitch IP addresses  -->

<div class="alert alert-success" role="alert"><i class="fas fa-lightbulb"></i> <b>Tip:</b> <strong>Set up a test Import API integration!</strong> We recommend setting up a test Import API integration while developing your script. This ensures that you can try different structuring and typing approaches while figuring out what works for you.</div>

<p>Stitch’s Import API allows you to push arbitrary data from a source to your Stitch account.</p>

<p>In this guide, we’ll cover what you need to know about structuring and typing the data you send to the Import API:</p>

<ul>
  <li>
    <p><a href="#endpoints">The endpoints in this guide</a></p>
  </li>
  <li>
    <p><a href="#structuring-guidelines">Some general guidelines for structuring Import API data</a></p>
  </li>
  <li>
    <p><a href="#tables-and-primary-keys">How to define tables and Primary Keys</a></p>
  </li>
  <li>
    <p><a href="#data-typing">How data typing works in the Import API</a></p>
  </li>
</ul>



    <hr>





    
        <h2 id="endpoints">Endpoints in this guide</h2>
    

        <!-- This file captures the code for Font Awesome icons that are used throughout the site to indicate support for different features, integration/destination combos, etc.

To use, include this file and then use variables to print the icons.

You can use a 'replace' filter to insert copy that will create a tooltip. 

Ex:  

	Additionally, you can use HTML in tooltips.
	If you include a link, remember to use apostrophes (') and not double quotes (")
	Because it'll break the formatting. 

	Ex: <a href='https://stitchdata.com'>Stitch</a> will work, but
		<a href="https://stitchdata.com">Stitch</a> won't. -->

<!-- Support icons -->

<!-- The color of this icon is Stitch grey (#999999) if used without a 'style' attribute -->

<!-- Info icons -->

<p>The Import API has two endpoints that accept and persist data to your Stitch destination:</p>

<table>
<tr>
<td class="attribute-name"></td>

<td width="35%; fixed">
<strong>Batch</strong>
</td>

<td width="35%; fixed">
<strong>Push</strong>
</td>

</tr>
<tr>
<td class="attribute-name"><strong>Resource URL</strong></td>

<td>
<a href="/docs/developers/import-api/api#batch-data">/v2/import/batch</a>
</td>

<td>
<a href="/docs/developers/import-api/api#push-data">/v2/import/push</a>
</td>

</tr>

<tr>
<td class="attribute-name">
<strong>
Accepts multiple records
</strong>
</td>

<td>

<p><strong>
<i class="fa fa-check-circle fa-lg" data-toggle="tooltip" style="color: #82BD41" aria-hidden="true" data-original-title="Supported"></i>
 Supported</strong></p>

<p>Requests may contain multiple records, as long as all records have the same structure and are destined for the same table.</p>

</td>

<td>

<p><strong>
<i class="fa fa-check-circle fa-lg" data-toggle="tooltip" style="color: #82BD41" aria-hidden="true" data-original-title="Supported"></i>
 Supported</strong></p>

<p>Requests may contain multiple records, whether destined for the same table or different tables.</p>

</td>

</tr>

<tr>
<td class="attribute-name">
<strong>
Accepts multiple tables
</strong>
</td>

<td>

<p><strong>
<i class="fa fa-times-circle fa-lg" aria-hidden="true" style="color: #E96065" data-toggle="tooltip" data-original-title="Not supported"></i>
 Unsupported</strong></p>

<p>Requests may only contain data for a single table at a time. Data for multiple tables must be sent via a request for each table.</p>

</td>

<td>

<p><strong>
<i class="fa fa-check-circle fa-lg" data-toggle="tooltip" style="color: #82BD41" aria-hidden="true" data-original-title="Supported"></i>
 Supported</strong></p>

<p>Requests may contain data for multiple tables.</p>

</td>

</tr>

<tr>
<td class="attribute-name">
<strong>
Enforces data types
</strong>
</td>

<td>

<p><strong>
<i class="fa fa-check-circle fa-lg" data-toggle="tooltip" style="color: #82BD41" aria-hidden="true" data-original-title="Supported"></i>
 Supported</strong></p>

<p>Enforced using JSON schema. Records that violate the schema will result in a <code class="language-plaintext highlighter-rouge">400</code> response and an error. Refer to the <a href="#batch-data-endpoint-data-typing">Batch endpoint data typing section</a> for more info.</p>

</td>

<td>

<p><strong>
<i class="fa fa-times-circle fa-lg" aria-hidden="true" style="color: #E96065" data-toggle="tooltip" data-original-title="Not supported"></i>
 Unsupported</strong></p>

<p>Data types are assigned according to the value’s JSON data type. No strict enforcement occurs. Refer to the <a href="#push-data-endpoint-data-typing">Push endpoint data typing section</a> for more info.</p>

</td>

</tr>

<tr>
<td class="attribute-name">
<strong>
Requires Primary Keys
</strong>
</td>

<td>


<p><i class="fa fa-exclamation-circle fa-lg" aria-hidden="true" data-toggle="tooltip" style="color: #ffcc00" data-original-title="Optional"></i>
 <strong>Optional</strong></p>


<p>Defined using the <code class="language-plaintext highlighter-rouge">key_names</code> property. If provided, each record for the specified table must have a unique, non-null Primary Key value.</p>

<p><strong>Note</strong>: Tables without Primary Keys will be loaded using <a href="/docs/replication/loading/understanding-loading-behavior">Append-Only loading</a>.</p>

</td>

<td>


<p><i class="fa fa-check-circle fa-lg" data-toggle="tooltip" style="color: #82BD41" aria-hidden="true" data-original-title="Required"></i>
 <strong>Required</strong></p>


<p>Defined using the <code class="language-plaintext highlighter-rouge">key_properties</code> property. Each record for the specified table must have a unique, non-null Primary Key value.</p>

</td>

</tr>

</table>

<p><strong>Note</strong>: We recommend using the Batch endpoint for sending data to the Import API. The Push endpoint is mentioned only as a comparison to the Batch endpoint and as a reference for existing Import API scripts.</p>


<!-- If a section has subsections -->
    

    
        <hr>
    

    
        <h2 id="structuring-guidelines">Structuring guidelines</h2>
    

        
<ul>
  <li>
    <p><a href="#general-guidelines">General guidelines</a></p>
  </li>
  <li>
    <p><a href="#request-body-requirements">Guidelines for request bodies</a></p>
  </li>
</ul>



<!-- If a section has subsections -->
    
        
            
                <h3 id="general-guidelines">General guidelines</h3>
            

            <p>When developing your Import API script, you should keep these general guidelines in mind:</p>

<ul>
  <li>
    <p><strong>Field names shouldn’t include reserved words</strong>. This includes the keywords <a href="/docs/replication/loading/reserved-keywords">reserved by Stitch</a> and by <a href="/docs/replication/loading/reserved-keywords#destination-reserved-keywords">your destination</a>. For example: Fields shouldn’t contain <code class="language-plaintext highlighter-rouge">_sdc</code>, a Stitch system prefix.</p>
  </li>
  <li>
    <p><strong>Fields should contain one data type per field.</strong> This affects not only how data is typed in your destination, but the resulting structure of destination tables. Refer to the <a href="#changed-data-type-handling">Data typing section</a> for more info.</p>
  </li>
</ul>


        <!-- If a subsection has its own subsections -->
            
        
            
                <h3 id="request-body-requirements">Guidelines for request bodies</h3>
            

            <p>We recommend using the Batch endpoint to send data to the Import API. As such, this section only contains the request body requirements for the Batch endpoint.</p>

<p>Request bodies sent to the Batch endpoint must be valid JSON and adhere to the following:</p>

<ul>
  <li>
    <p>Must contain data only for a single table.</p>
  </li>
  <li>
    <p>Must contain all <a href="/docs/developers/import-api/api#batch-data--arguments">required arguments</a>.</p>
  </li>
  <li>
    <p>Cannot exceed 20MB in size.</p>
  </li>
  <li>
    <p>Each <code class="language-plaintext highlighter-rouge">data</code> object in the request body must contain between 1 and 20,000 records.</p>
  </li>
  <li>
    <p>Each <code class="language-plaintext highlighter-rouge">data</code> object in the request body cannot exceed 10,000 individual data points.</p>
  </li>
</ul>



        <!-- If a subsection has its own subsections -->
            
        
    

    
        <hr>
    

    
        <h2 id="tables-and-primary-keys">Defining tables and Primary Keys</h2>
    

        
<ul>
  <li>
    <p><a href="#tables">Tables</a></p>
  </li>
  <li>
    <p><a href="#primary-keys">Primary Keys</a></p>
  </li>
</ul>



<!-- If a section has subsections -->
    
        
            
                <h3 id="tables">Tables</h3>
            

            <p>Tables are dynamically generated based on the <code class="language-plaintext highlighter-rouge">table_name</code> specified in Import API requests. All tables pushed using the same API access token will be created in the same schema in your destination. You can find the name of <a href="/docs/replication/loading/understanding-destination-schemas#integration-schema-names">the schema for your Import API integration</a> by logging into Stitch.</p>

<p>Generally, we recommend creating one table for each type of record you want to push to the Import API. For example: If you have customer and product data, you should create two tables - one for <code class="language-plaintext highlighter-rouge">customers</code> and one for <code class="language-plaintext highlighter-rouge">products</code>.</p>

<p>Every record pushed to a table should have the same structure. For example: If a <code class="language-plaintext highlighter-rouge">customers</code> table contains <code class="language-plaintext highlighter-rouge">customer_id</code>, <code class="language-plaintext highlighter-rouge">name</code>, and <code class="language-plaintext highlighter-rouge">email</code> fields, every customer record pushed into this table should contain those fields.</p>

<p><strong>Note</strong>: The Import API doesn’t support methods for specifically creating or deleting a table. If you need to delete a table, you should drop it in your destination and prevent any new data for the table from being pushed to the Import API. Any data accepted by Stitch will still be processed, even if the destination table has been dropped.</p>


        <!-- If a subsection has its own subsections -->
            
        
            
                <h3 id="primary-keys">Primary Keys</h3>
            

            <p>While Primary Keys are optional when using the <a href="/docs/developers/import-api/api#batch-data">Batch endpoint</a>, they will determine how Stitch loads data for the table:</p>

<ul>
  <li>
    <p><strong>For tables with Primary Keys</strong>, Stitch will use Primary Key columns to de-dupe data during the Loading phase of the replication process. This ensures that only the most recent version of a record is loaded into the destination.</p>
  </li>
  <li>
    <p><strong>If a table doesn’t have a Primary Key, or if the destination only supports Append-Only loading</strong>, records will be appended to the end of the table as new rows. Existing rows will not be updated. Refer to the <a href="/docs/replication/loading/understanding-loading-behavior">Understanding loading behavior guide</a> for more info and examples.</p>
  </li>
</ul>

<p>A table’s Primary Keys are defined using the <code class="language-plaintext highlighter-rouge">key_names</code> property in the <a href="/docs/developers/import-api/api#batch-data">Batch endpoint</a>. For example:</p>

<div class="code-header"><div class="copy-code-container"><div class="copy-code-button" data-code="{
  &quot;key_names&quot;:[
      &quot;id&quot;
   ],
   &quot;table_name&quot;:&quot;customers&quot;,
   &quot;schema&quot;:{
      &quot;properties&quot;:{
         &quot;id&quot;:{
            &quot;type&quot;:&quot;integer&quot;
         },
         &quot;name&quot;:{
            &quot;type&quot;:&quot;string&quot;
         },
         &quot;age&quot;:{
            &quot;type&quot;:&quot;integer&quot;
         },
         &quot;has_magic&quot;:{
            &quot;type&quot;:&quot;boolean&quot;,
         },
         &quot;modified_at&quot;:{
            &quot;type&quot;:&quot;string&quot;,
            &quot;format&quot;:&quot;date-time&quot;
         }
      }
   },
   &quot;messages&quot;:[
      {
         &quot;action&quot;:&quot;upsert&quot;,
         &quot;sequence&quot;:1565880017,
         &quot;data&quot;:{
            &quot;id&quot;:1,
            &quot;name&quot;:&quot;Finn&quot;,
            &quot;age&quot;:15,
            &quot;has_magic&quot;:false,
            &quot;modified_at&quot;:&quot;2018-04-30T17:00:00Z&quot;
         }
      }
   ]
}" title="Copy to clipboard" tabindex="0"></div></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"key_names"</span><span class="p">:[</span><span class="w">
      </span><span class="s2">"id"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="nl">"table_name"</span><span class="p">:</span><span class="s2">"customers"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"schema"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"properties"</span><span class="p">:{</span><span class="w">
         </span><span class="nl">"id"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"integer"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"age"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"integer"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"has_magic"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"boolean"</span><span class="p">,</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"modified_at"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"format"</span><span class="p">:</span><span class="s2">"date-time"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"messages"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="nl">"action"</span><span class="p">:</span><span class="s2">"upsert"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"sequence"</span><span class="p">:</span><span class="mi">1565880017</span><span class="p">,</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Finn"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"age"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
            </span><span class="nl">"has_magic"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="s2">"2018-04-30T17:00:00Z"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>If you choose to define Primary Keys, keep the following in mind:</p>

<ul>
  <li>Every record in a table must have a Primary Key.</li>
  <li>Primary Key columns should only contain a single data type.</li>
  <li>Primary Keys cannot be null.</li>
  <li>
    <p>Primary Key values must be unique. For composite keys, the value of all combined values must be unique across all records in the table.</p>

    <p>For example: Let’s assume that <code class="language-plaintext highlighter-rouge">event_id</code>, <code class="language-plaintext highlighter-rouge">app_id</code>, and <code class="language-plaintext highlighter-rouge">created_at</code> are the Primary Keys for the table containing these records:</p>

    <div class="code-header"><div class="code-description-container"><strong>Example of unique composite Primary Keys</strong></div><div class="copy-code-container"><div class="copy-code-button" data-code="
[
 {
    &quot;event_id&quot;:1,
    &quot;app_id&quot;:1,
    &quot;created_at&quot;:&quot;2019-08-20T00:00:00+00:00&quot;
 },
 {
    &quot;event_id&quot;:2,
    &quot;app_id&quot;:1,
    &quot;created_at&quot;:&quot;2019-08-20T00:00:00+00:00&quot;
 }
]" title="Copy to clipboard" tabindex="0"></div></div></div>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
 </span><span class="p">{</span><span class="w">
    </span><span class="nl">"event_id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"app_id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"2019-08-20T00:00:00+00:00"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="p">{</span><span class="w">
    </span><span class="nl">"event_id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"app_id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"2019-08-20T00:00:00+00:00"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>

    <p>While <code class="language-plaintext highlighter-rouge">app_id</code> and <code class="language-plaintext highlighter-rouge">created_at</code> have two identical values between these records, the <code class="language-plaintext highlighter-rouge">event_id</code> makes the records unique.</p>
  </li>
  <li>
    <p>Every column in the <code class="language-plaintext highlighter-rouge">key_names</code> property must be present in both the request’s Schema object and in every record for the table. For example:</p>

    <div class="code-header"><div class="code-description-container"><strong>Example of defined composite Primary Keys</strong></div><div class="copy-code-container"><div class="copy-code-button" data-code="
{
 &quot;key_names&quot;:[
    &quot;id&quot;,
    &quot;created_at&quot;
 ]
}" title="Copy to clipboard" tabindex="0"></div></div></div>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
 </span><span class="nl">"key_names"</span><span class="p">:[</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>

    <p>In this case, the Schema object must contain <code class="language-plaintext highlighter-rouge">id</code> and <code class="language-plaintext highlighter-rouge">created_at</code> properties. Every record must contain also contain these properties or the Import API will return the following error:</p>

    <div class="code-header"><div class="code-description-container"><strong>Missing key property error</strong></div><div class="copy-code-container"><div class="copy-code-button" data-code="
{
   &quot;error&quot;:&quot;Record is missing key property &lt;KEY_NAME&gt;&quot;
}" title="Copy to clipboard" tabindex="0"></div></div></div>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"error"</span><span class="p">:</span><span class="s2">"Record is missing key property &lt;KEY_NAME&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ul>


        <!-- If a subsection has its own subsections -->
            
        
    

    
        <hr>
    

    
        <h2 id="data-typing">Data typing</h2>
    

        <p>How data is typed depends on what endpoint you’re using to push data to the Import API:</p>

<ul>
  <li>
    <p><a href="#create-a-batch-endpoint-data-typing">Batch (/v2/import/batch) endpoint</a></p>
  </li>
  <li>
    <p><a href="#push-data-endpoint-data-typing">Push (/v2/import/push) endpoint</a></p>
  </li>
</ul>

<p><strong>Note</strong>: We recommend using the Batch endpoint for sending data to the Import API. The Push endpoint is mentioned only as a comparison to the Batch endpoint and as a reference for existing Import API scripts.</p>


<!-- If a section has subsections -->
    
        
            
                <h3 id="create-a-batch-endpoint-data-typing">Batch (/v2/import/batch) endpoint data typing</h3>
            

            <p>When using the Batch endpoint, Stitch will assign data types based on the JSON schema in the <a href="/docs/developers/import-api/api#schema-object">Schema object</a> in the request.</p>

<p>For example: This is the schema for a table named <code class="language-plaintext highlighter-rouge">customers</code>:</p>

<div class="code-header"><div class="code-description-container"><strong>Example table schema</strong></div><div class="copy-code-container"><div class="copy-code-button" data-code="{
   &quot;schema&quot;:{
      &quot;properties&quot;:{
         &quot;id&quot;:{
            &quot;type&quot;:&quot;integer&quot;
         },
         &quot;name&quot;:{
            &quot;type&quot;:&quot;string&quot;
         },
         &quot;age&quot;:{
            &quot;type&quot;:&quot;number&quot;
         },
         &quot;has_magic&quot;:{
            &quot;type&quot;:&quot;boolean&quot;
         },
         &quot;modified_at&quot;:{
            &quot;type&quot;:&quot;string&quot;,
            &quot;format&quot;:&quot;date-time&quot;
         }
      }
   }
}" title="Copy to clipboard" tabindex="0"></div></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"schema"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"properties"</span><span class="p">:{</span><span class="w">
         </span><span class="nl">"id"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"integer"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"name"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"age"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"number"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"has_magic"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"boolean"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"modified_at"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"format"</span><span class="p">:</span><span class="s2">"date-time"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>A record sent to the Import API for the <code class="language-plaintext highlighter-rouge">customers</code> table could look like this:</p>

<div class="code-header"><div class="code-description-container"><strong>Example record sent to /v2/import/batch</strong></div><div class="copy-code-container"><div class="copy-code-button" data-code="{
   &quot;action&quot;:&quot;upsert&quot;,
   &quot;sequence&quot;:1565880017,
   &quot;data&quot;:{
      &quot;id&quot;:1,
      &quot;name&quot;:&quot;Finn&quot;,
      &quot;age&quot;:15,
      &quot;has_magic&quot;:false,
      &quot;modified_at&quot;:&quot;2018-04-30T17:00:00Z&quot;
   }
}" title="Copy to clipboard" tabindex="0"></div></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"action"</span><span class="p">:</span><span class="s2">"upsert"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"sequence"</span><span class="p">:</span><span class="mi">1565880017</span><span class="p">,</span><span class="w">
   </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Finn"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"age"</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span><span class="w">
      </span><span class="nl">"has_magic"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="s2">"2018-04-30T17:00:00Z"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>This data point would create a table similar to the following, depending on the data types used by your destination:</p>

<table>
  <thead>
    <tr>
      <th>id (integer)</th>
      <th>name (string)</th>
      <th>age (integer)</th>
      <th>has_magic (boolean)</th>
      <th>modified_at (timestamp)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Finn</td>
      <td>15</td>
      <td>false</td>
      <td>2018-04-30T17:00:00Z</td>
    </tr>
  </tbody>
</table>

<p>Records sent to the Import API must adhere to the JSON schema for the table that contains them, or the API will return a <code class="language-plaintext highlighter-rouge">400</code> response and an error similar to the following:</p>

<div class="code-header"><div class="code-description-container"><strong>Record did not conform to schema error</strong></div><div class="copy-code-container"><div class="copy-code-button" data-code="{
  &quot;error&quot;: &quot;Record 0 did not conform to schema: #/&lt;FIELD_NAME&gt;: expected: &lt;DATA_TYPE&gt;, found: &lt;DATA_TYPE&gt;&quot;
}" title="Copy to clipboard" tabindex="0"></div></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Record 0 did not conform to schema: #/&lt;FIELD_NAME&gt;: expected: &lt;DATA_TYPE&gt;, found: &lt;DATA_TYPE&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Refer to the <strong>Errors</strong> in the <a href="/docs/developers/import-api/api#batch-data--returns">Batch endpoint documentation</a> for a list of errors and their causes.</p>


        <!-- If a subsection has its own subsections -->
            
                
                    
                        <h4 id="json-schemas-batch-endpoint">JSON schemas in the Batch endpoint</h4>
                    

                    <p>The schema specified in a request’s Schema object must be a valid JSON schema. The Batch endpoint uses <a href="https://python-jsonschema.readthedocs.io/en/v2.6.0/validate/" target="new">jsonschema 2.6.0</a>, a JSON Schema implementation for Python, to validate JSON schemas.</p>

<p>Walking through creating a JSON schema is outside the scope of this guide, but <a href="" target="new">the official Understanding JSON Schema reference</a> is a good resource for getting started. When you’re ready, you can use <a href="https://jsonschema.net/" target="new">jsonschema.net</a> to test and validate your own schemas.</p>


                
            
        
            
                <h3 id="push-data-endpoint-data-typing">Push (/v2/import/push) endpoint data typing</h3>
            

            
<div class="alert alert-info" role="alert">
    <i class="fas fa-info-circle"></i>
    <strong>Use the Batch endpoint for the best data typing experience.</strong> The Push endpoint doesn’t allow you to specify or enforce data types, which may lead to inconsistencies when data types change. The <a href="#create-a-batch-endpoint-data-typing">Batch endpoint</a> allows this via a JSON schema you supply.
</div>

<p>When using the Push endpoint, Stitch will type the data based on the value’s JSON data type. The Import API doesn’t infer data types on its own.</p>

<p>As JSON doesn’t explicitly enforce data types, all data typing needs to be handled withing your data source and Import API script.</p>

<p>For example:</p>

<div class="code-header"><div class="code-description-container"><strong>Example record sent to /v2/import/push</strong></div><div class="copy-code-container"><div class="copy-code-button" data-code="{
   &quot;id&quot;:1,
   &quot;cost&quot;:3.14,
   &quot;tax&quot;:&quot;1.00&quot;
   &quot;modified_at&quot;:&quot;2019-08-13T21:25:03+0000&quot;
}" title="Copy to clipboard" tabindex="0"></div></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="nl">"cost"</span><span class="p">:</span><span class="mf">3.14</span><span class="p">,</span><span class="w">
   </span><span class="nl">"tax"</span><span class="p">:</span><span class="s2">"1.00"</span><span class="w">
   </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="s2">"2019-08-13T21:25:03+0000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>This data point would create a table similar to the following, depending on the data types used by your destination:</p>

<table>
  <thead>
    <tr>
      <th>id (integer)</th>
      <th>cost (double)</th>
      <th>tax (string)</th>
      <th>modified_at (string)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>3.14</td>
      <td>1.00</td>
      <td>2019-08-13T21:25:03+0000</td>
    </tr>
  </tbody>
</table>

<p>Consider the <code class="language-plaintext highlighter-rouge">modified_at</code> field in the example. Even though this field contains an ISO 8601 formatted timestamp, the Import API won’t type this column as a <code class="language-plaintext highlighter-rouge">timestamp</code> in the destination. This is because it’s being sent as a JSON string.</p>

<p>While JSON doesn’t allow for defining data types, you can use the <a href="#create-a-batch-endpoint-data-typing">Batch endpoint</a> instead. This endpoint accepts a JSON schema and will enforce the data types it declares for each field.</p>


        <!-- If a subsection has its own subsections -->
            
                
                    
                        <h4 id="changed-data-type-handling-push-endpoint">Changed data type handling in the Push endpoint</h4>
                    

                    <p>The Push endpoint considers data types on a record-by-record basis. If a field’s data type changes from one record to the next, all data types received via the Push endpoint will be used when the data is loaded. In the destination, this will look like a field’s values have been “split” between columns.</p>

<p>For example: Consider the <code class="language-plaintext highlighter-rouge">cost</code> values for each of the following records:</p>

<div class="code-header"><div class="copy-code-container"><div class="copy-code-button" data-code="
{
   &quot;id&quot;:1,
   &quot;cost&quot;:3.14,         // number
   &quot;tax&quot;:&quot;1.00&quot;
   &quot;modified_at&quot;:&quot;2019-08-13T21:25:03+0000&quot;
},
{
   &quot;id&quot;:2,
   &quot;cost&quot;:10,           // integer
   &quot;tax&quot;:&quot;2.45&quot;
   &quot;modified_at&quot;:&quot;2019-08-13T21:34:14+0000&quot;
},
{
   &quot;id&quot;:3,
   &quot;cost&quot;:5.61,         // number
   &quot;tax&quot;:&quot;.55&quot;
   &quot;modified_at&quot;:&quot;2019-08-13T21:35:04+0000&quot;
}" title="Copy to clipboard" tabindex="0"></div></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="nl">"cost"</span><span class="p">:</span><span class="mf">3.14</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">number</span><span class="w">
   </span><span class="nl">"tax"</span><span class="p">:</span><span class="s2">"1.00"</span><span class="w">
   </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="s2">"2019-08-13T21:25:03+0000"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="nl">"cost"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">integer</span><span class="w">
   </span><span class="nl">"tax"</span><span class="p">:</span><span class="s2">"2.45"</span><span class="w">
   </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="s2">"2019-08-13T21:34:14+0000"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
   </span><span class="nl">"cost"</span><span class="p">:</span><span class="mf">5.61</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">number</span><span class="w">
   </span><span class="nl">"tax"</span><span class="p">:</span><span class="s2">".55"</span><span class="w">
   </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="s2">"2019-08-13T21:35:04+0000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>As a result of the <code class="language-plaintext highlighter-rouge">cost</code> values changing between records, the destination table would look like this:</p>

<table>
  <thead>
    <tr>
      <th>id (integer)</th>
      <th>cost (double)</th>
      <th>cost__it (integer)</th>
      <th>tax (string)</th>
      <th>modified_at (string)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>3.14</td>
      <td><em>null</em></td>
      <td>1.00</td>
      <td>2019-08-13T21:25:03+0000</td>
    </tr>
    <tr>
      <td>2</td>
      <td><em>null</em></td>
      <td>10</td>
      <td>2.45</td>
      <td>2019-08-13T21:34:14+0000</td>
    </tr>
    <tr>
      <td>3</td>
      <td>5.61</td>
      <td><em>null</em></td>
      <td>.55</td>
      <td>2019-08-13T21:35:04+0000</td>
    </tr>
  </tbody>
</table>

<p>To prevent this from occurring, each field should only ever contain a single data type. You can resolve column splits by:</p>

<ol>
  <li>Using a view in your destination to coerce the data types</li>
  <li>Fixing the issue in the source, <a href="#enforcing-data-types-in-push-endpoint">enforcing data typing</a>, dropping the destination table, and re-pushing all historical data to Stitch. The table will be re-created with the correct data types.</li>
</ol>


                
                    
                        <h4 id="enforcing-data-types-in-push-endpoint">Enforcing data types in the Push endpoint</h4>
                    

                    <p>The only way to enforce data types using the Push endpoint is to use <a href="https://github.com/cognitect/transit-format" target="new">Transit</a>, as JSON on its own doesn’t allow for defining data types. You can use Transit libraries in your Import API script to specify data types for various fields.</p>

<p>Otherwise, we recommend using the <a href="#create-a-batch-endpoint-data-typing">Batch endpoint</a>. This endpoint accepts a JSON schema and will enforce the data types it declares for each field.</p>


                
            
        
    

    





<!-- GitHub Feedback snippet -->

</div>

<hr class="footer-cta">
<div class="footer-signup-cta" data-swiftype-index='false'>
    <div class="wrapper">
        <div>
            <p>Try Stitch for free</p>
        </div>
        <div>
            <a href="https://www.stitchdata.com/signup" class="btn-default btn-default--yellow">
                Start your trial <span class="arrow"></span>
            </a>
        </div>
    </div>
</div>
<footer data-swiftype-index='false'>
    <div class="site-generation">
        &copy;2020 Stitch. All rights reserved. 
         Site last generated: Jul 23, 2020
    </div>
    
</footer>
        </div>
    </div>
</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/docs/js/docsearch.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<!-- Used for creating heading anchors -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="//cdn.statuspage.io/se-v2.js"></script>

<script src="/docs/js/toc.js"></script>
<script src="/docs/js/customscripts.js"></script>
<script src="/docs/js/copyCode.js"></script>

<script type="text/javascript">
    $(".fouc").removeClass("fouc");
</script>

<!-- Intercom bubble -->
<script>
  window.intercomSettings = {
    app_id: "okjpf68w"
  };
</script>
<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/okjpf68w';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()
</script>

<!-- Search -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','SAg6gNWby6H1xYzjhfzB','2.0.0');
</script>

<div class="st-search-container"></div>

</body>
</html>
