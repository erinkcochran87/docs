# ---------------------------- #
#   NETLIFY CMS CONFIGURATION  #
# ---------------------------- #

## This file contains the configuration settings for the Netlify CMS.

# -------------------------- #
#   Auth and Repo Settings   #
# -------------------------- #

backend:
  name: git-gateway
  branch: master


# -------------------------- #
#    Publishing Settings     #
# -------------------------- #

publish_mode: editorial_workflow


# -------------------------- #
#        Image Settings      #
# -------------------------- #

media_folder: "images/changelog"
public_folder: "/images/changelog"



# -------------------------- #
#     Collection Settings    #
# -------------------------- #

## Only the folders (collections) listed in this section
## will be accessible via the Netlify CMS. In this way
## we can limit what CMS users have the ability to access and modify.

## Docs: https://www.netlifycms.org/docs/configuration-options/#collections

# Each collection in this list has the following fields:

  # name: Used in routes, e.g., /admin/collections/blog
  # label: Used in the UI
  # folder: The path to the folder where the documents are stored
  # create: Allow users to create new documents in this collection
  # slug: Filename template, e.g., YYYY-MM-DD-title.md
  # fields: The fields for each document, usually in front matter

collections:
  - name: "entry_types"
    label: "Entry Types"
    label_singluar: "Entry Type"
    create: true
    folder: "_data/changelog/entry-types"
    fields:
      - label: "type"
        name: "Type"
        widget: "string"

      - label: "display_name"
        name: "Display Name"
        widget: "string"

  - name: "changelog" 
    label: "Changelog Entries"
    folder: "_posts"
    create: true 
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}" 
    fields: 
      - label: "Title"
        name: "title"
        widget: "string"

      - label: "Publish Date"
        name: "date"
        widget: "datetime"

      - label: "Type"
        name: "type"
        widget: "relation"
        collection: "entry_types"
        search_fields: ["type"]
        display_fields: ["display_name"]
        value_field: "type"

      - label: "Body"
        name: "body"
        widget: "markdown"