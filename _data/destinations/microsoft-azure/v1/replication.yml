# ------------------------------------------ #
#     AZURE SQL DW REPLICATION DETAILS       #
# ------------------------------------------ #

## Details about replication/loading for
## Stitch's Microsoft Azure SQL DW destination.

configurable-loading-behavior:  "false"

upsert-support: "true"

append-support: "false"

primary-key-support: "true"

nested-structure-support: "false"

rename-original-column-in-split:  "false"


list:
  - id: "incremental-replication-upserts"
    categories: "replication"
    value: *incremental-rep-upserts
    description: |
      Using a table's Primary Keys, Stitch will perform an update operation on existing rows to overwrite the data.

  - id: "primary-keys"
    categories: "replication"
    value: *primary-key-support
    description: |
      {{ destination.display_name }} destinations do not have native support for Primary Keys.

      To ensure existing rows can be updated in incrementally-replicated tables, Stitch will create an `_sdc_primary_keys` table in every integration schema. This table contains the Primary Key data for every table in the given schema, which Stitch will use to de-dupe rows during loading.

      **Note**: De-duplicating doesn't apply to tables that are replicated in full.

      Refer to the [Primary Key system table documentation]({{ link.destinations.storage.primary-key-system-table | prepend: site.baseurl }}) for more info.

  - id: "multiple-data-types"
    categories: "replication"
    value: *multiple-data-type-support
    description: |
      {{ destination.display_name }} destinations do not support multiple data types in a single column.

      To accommodate this scenario, Stitch will create additional columns for each data type:

      - The **original column**'s name will remain as-is. It will be typed according to the first data type Stitch detected for the column.
      - **Subsequent columns** will have the data type appended to their name. Additionally, only data of this type will be stored in this column. For example: `customer_id__bi` would contain data determined to be a big integer. **Note**: If multiple data types are loaded during creation of the column, all columns will be created with the data type appended to their name.

  - id: "nested-data-structures"
    categories: "replication"
    value: *nested-structure-support
    description: |
      {{ destination.display_name }} destinations do not have native support for nested data structures.

      To ensure nested data can be loaded, Stitch will flatten objects and arrays into columns and subtables, respectively. For more info and examples, refer to the [Handling nested data structures guide]({{ link.destinations.storage.nested-structures | prepend: site.baseurl }}).

  - id: "incompatible-sources"
    categories: "replication"
    important: true
    ## The value and description for this live in _data/destinations/reference/defaults.yml